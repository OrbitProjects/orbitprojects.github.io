// Time & Date
function showTime() {
  var date = new Date();
  var h = date.getHours(); // 0 - 23
  var m = date.getMinutes(); // 0 - 59
  var session = "";
  session = "AM";
  if (h == 12) {
    session = "PM";
  }

  if (h == 0) {
    h = 12;
  }
  if (h > 12) {
    h = h - 12;
    session = "PM";
  }
  h = (h < 10) ? "0" + h : h;
  m = (m < 10) ? "0" + m : m;

  var time = h + ":" + m + " " + session;
  document.getElementById("timeDisplay").innerText = time;

  setTimeout(showTime, 1000);

  if (document.getElementById("displaySearchBox").checked == true) {
    document.getElementById("timeDisplay").classList.add("timeDisplayBig");
    document.getElementById("dateDisplay").classList.add("dateDisplayBig");
  } else {
    document.getElementById("timeDisplay").classList.remove("timeDisplayBig");
    document.getElementById("dateDisplay").classList.remove("dateDisplayBig");
  }

}
const monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

function showDate() {
  var date = new Date();
  var D = date.getDay();
  var M = date.getMonth();
  var d = date.getDate();
  var Y = date.getFullYear();
  setTimeout(showDate, 3600000);
  var time = dayNames[D] + " " + monthNames[M] + " " + d + " " + Y;
  document.getElementById("dateDisplay").innerText = time;
}

showTime()
showDate()

_json = `{"latitude":-31.880341,"longitude":115.8639946,"timezone":"Australia/Perth","currently":{"time":1576221112,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":97.78,"apparentTemperature":97.78,"dewPoint":33.26,"humidity":0.11,"pressure":1012.7,"windSpeed":10.56,"windGust":16.15,"windBearing":215,"cloudCover":0,"uvIndex":7,"visibility":10,"ozone":271.9},"hourly":{"summary":"Clear throughout the day.","icon":"clear-day","data":[{"time":1576220400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":98.09,"apparentTemperature":98.09,"dewPoint":32.74,"humidity":0.1,"pressure":1012.8,"windSpeed":9.98,"windGust":15.36,"windBearing":217,"cloudCover":0,"uvIndex":8,"visibility":10,"ozone":271.8},{"time":1576224000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":96.09,"apparentTemperature":96.09,"dewPoint":35.39,"humidity":0.12,"pressure":1012.4,"windSpeed":13.02,"windGust":19.5,"windBearing":206,"cloudCover":0,"uvIndex":5,"visibility":10,"ozone":272.1},{"time":1576227600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":93.78,"apparentTemperature":93.78,"dewPoint":37.71,"humidity":0.14,"pressure":1012.1,"windSpeed":14.93,"windGust":22.64,"windBearing":202,"cloudCover":0,"uvIndex":2,"visibility":10,"ozone":272.2},{"time":1576231200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":91,"apparentTemperature":91,"dewPoint":38.51,"humidity":0.16,"pressure":1012.4,"windSpeed":14.77,"windGust":24.09,"windBearing":199,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":271.6},{"time":1576234800,"summary":"Clear","icon":"clear-day","precipIntensity":0.0002,"precipProbability":0.01,"precipType":"rain","temperature":87.61,"apparentTemperature":87.61,"dewPoint":38.59,"humidity":0.18,"pressure":1013.1,"windSpeed":13.49,"windGust":24.51,"windBearing":191,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":270.7},{"time":1576238400,"summary":"Clear","icon":"clear-night","precipIntensity":0.0003,"precipProbability":0.01,"precipType":"rain","temperature":84.76,"apparentTemperature":84.76,"dewPoint":38.38,"humidity":0.19,"pressure":1013.5,"windSpeed":12.08,"windGust":24.18,"windBearing":182,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":269.9},{"time":1576242000,"summary":"Clear","icon":"clear-night","precipIntensity":0.0003,"precipProbability":0.01,"precipType":"rain","temperature":82.86,"apparentTemperature":82.86,"dewPoint":37.54,"humidity":0.2,"pressure":1013.7,"windSpeed":10.83,"windGust":22.96,"windBearing":173,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":269.7},{"time":1576245600,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":81.27,"apparentTemperature":81.27,"dewPoint":36.21,"humidity":0.2,"pressure":1013.6,"windSpeed":9.47,"windGust":20.99,"windBearing":162,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":269.7},{"time":1576249200,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":79.97,"apparentTemperature":79.97,"dewPoint":36.07,"humidity":0.21,"pressure":1013.4,"windSpeed":8.36,"windGust":18.95,"windBearing":152,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":269.6},{"time":1576252800,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":78.74,"apparentTemperature":78.74,"dewPoint":38.17,"humidity":0.23,"pressure":1012.6,"windSpeed":7.68,"windGust":16.88,"windBearing":143,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":269.1},{"time":1576256400,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":77.68,"apparentTemperature":77.68,"dewPoint":41.38,"humidity":0.27,"pressure":1011.8,"windSpeed":7.29,"windGust":14.73,"windBearing":135,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":268.4},{"time":1576260000,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":76.63,"apparentTemperature":76.63,"dewPoint":43.63,"humidity":0.31,"pressure":1011.3,"windSpeed":6.96,"windGust":13.08,"windBearing":125,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":268.3},{"time":1576263600,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":74.95,"apparentTemperature":74.95,"dewPoint":44.13,"humidity":0.33,"pressure":1011.6,"windSpeed":6.69,"windGust":12.35,"windBearing":113,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":269},{"time":1576267200,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":73.27,"apparentTemperature":73.27,"dewPoint":43.81,"humidity":0.35,"pressure":1011.9,"windSpeed":6.52,"windGust":12.1,"windBearing":102,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":270.3},{"time":1576270800,"summary":"Clear","icon":"clear-night","precipIntensity":0.0003,"precipProbability":0.01,"precipType":"rain","temperature":72.23,"apparentTemperature":72.23,"dewPoint":43.41,"humidity":0.35,"pressure":1012,"windSpeed":6.28,"windGust":11.66,"windBearing":90,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":271.2},{"time":1576274400,"summary":"Clear","icon":"clear-day","precipIntensity":0.0002,"precipProbability":0.01,"precipType":"rain","temperature":75.14,"apparentTemperature":75.14,"dewPoint":41.68,"humidity":0.3,"pressure":1012.1,"windSpeed":5.97,"windGust":10.65,"windBearing":75,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":271.4},{"time":1576278000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":80.17,"apparentTemperature":80.17,"dewPoint":39.42,"humidity":0.23,"pressure":1011.9,"windSpeed":5.57,"windGust":9.42,"windBearing":61,"cloudCover":0,"uvIndex":1,"visibility":10,"ozone":271.2},{"time":1576281600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":85.29,"apparentTemperature":85.29,"dewPoint":37.3,"humidity":0.18,"pressure":1011.6,"windSpeed":5.16,"windGust":8.41,"windBearing":61,"cloudCover":0,"uvIndex":4,"visibility":10,"ozone":271.2},{"time":1576285200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":90.28,"apparentTemperature":90.28,"dewPoint":35.92,"humidity":0.15,"pressure":1011.4,"windSpeed":4.38,"windGust":7.38,"windBearing":88,"cloudCover":0,"uvIndex":7,"visibility":10,"ozone":271.3},{"time":1576288800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":95.29,"apparentTemperature":95.29,"dewPoint":33.59,"humidity":0.11,"pressure":1011.1,"windSpeed":3.67,"windGust":6.54,"windBearing":236,"cloudCover":0,"uvIndex":10,"visibility":10,"ozone":271.5},{"time":1576292400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":98.79,"apparentTemperature":98.79,"dewPoint":32.08,"humidity":0.1,"pressure":1010.7,"windSpeed":4.15,"windGust":6.88,"windBearing":273,"cloudCover":0,"uvIndex":12,"visibility":10,"ozone":271.7},{"time":1576296000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":99.69,"apparentTemperature":99.69,"dewPoint":31.93,"humidity":0.09,"pressure":1010.1,"windSpeed":6.76,"windGust":9.28,"windBearing":236,"cloudCover":0,"uvIndex":13,"visibility":10,"ozone":272},{"time":1576299600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":99.08,"apparentTemperature":99.08,"dewPoint":32.02,"humidity":0.1,"pressure":1009.1,"windSpeed":10.46,"windGust":12.98,"windBearing":217,"cloudCover":0,"uvIndex":13,"visibility":10,"ozone":272.5},{"time":1576303200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":98.05,"apparentTemperature":98.05,"dewPoint":32.55,"humidity":0.1,"pressure":1008.2,"windSpeed":13.26,"windGust":16.3,"windBearing":224,"cloudCover":0,"uvIndex":11,"visibility":10,"ozone":273},{"time":1576306800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":97.16,"apparentTemperature":97.16,"dewPoint":34.43,"humidity":0.11,"pressure":1007.6,"windSpeed":14.53,"windGust":18.39,"windBearing":220,"cloudCover":0,"uvIndex":8,"visibility":10,"ozone":273.8},{"time":1576310400,"summary":"Clear","icon":"clear-day","precipIntensity":0.0002,"precipProbability":0.01,"precipType":"rain","temperature":95.62,"apparentTemperature":95.62,"dewPoint":35.81,"humidity":0.12,"pressure":1007.5,"windSpeed":14.94,"windGust":20.27,"windBearing":208,"cloudCover":0,"uvIndex":5,"visibility":10,"ozone":274.7},{"time":1576314000,"summary":"Clear","icon":"clear-day","precipIntensity":0.0003,"precipProbability":0.01,"precipType":"rain","temperature":93.86,"apparentTemperature":93.86,"dewPoint":37.32,"humidity":0.14,"pressure":1007.3,"windSpeed":14.72,"windGust":21.5,"windBearing":199,"cloudCover":0,"uvIndex":2,"visibility":10,"ozone":275.1},{"time":1576317600,"summary":"Clear","icon":"clear-day","precipIntensity":0.0002,"precipProbability":0.01,"precipType":"rain","temperature":91.56,"apparentTemperature":91.56,"dewPoint":37.89,"humidity":0.15,"pressure":1007.4,"windSpeed":13.75,"windGust":21.9,"windBearing":193,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":274.7},{"time":1576321200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":88.73,"apparentTemperature":88.73,"dewPoint":38.04,"humidity":0.17,"pressure":1007.3,"windSpeed":12.2,"windGust":21.64,"windBearing":188,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":274},{"time":1576324800,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":86.23,"apparentTemperature":86.23,"dewPoint":38.09,"humidity":0.18,"pressure":1007.4,"windSpeed":10.9,"windGust":20.94,"windBearing":182,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":273.3},{"time":1576328400,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":84.3,"apparentTemperature":84.3,"dewPoint":38.14,"humidity":0.19,"pressure":1007.6,"windSpeed":10.12,"windGust":19.46,"windBearing":173,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":272.9},{"time":1576332000,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":82.53,"apparentTemperature":82.53,"dewPoint":37.93,"humidity":0.2,"pressure":1007.8,"windSpeed":9.62,"windGust":17.57,"windBearing":164,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":272.6},{"time":1576335600,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":81.31,"apparentTemperature":81.31,"dewPoint":37.9,"humidity":0.21,"pressure":1007.7,"windSpeed":9.44,"windGust":16.55,"windBearing":152,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":272.3},{"time":1576339200,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":80.74,"apparentTemperature":80.74,"dewPoint":37.7,"humidity":0.21,"pressure":1007.3,"windSpeed":9.82,"windGust":17.55,"windBearing":137,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":271.7},{"time":1576342800,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":80.51,"apparentTemperature":80.51,"dewPoint":37.48,"humidity":0.21,"pressure":1006.1,"windSpeed":10.51,"windGust":19.44,"windBearing":121,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":271.2},{"time":1576346400,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":79.92,"apparentTemperature":79.92,"dewPoint":37.53,"humidity":0.22,"pressure":1005.5,"windSpeed":10.91,"windGust":20.09,"windBearing":107,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":271.2},{"time":1576350000,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":78.37,"apparentTemperature":78.37,"dewPoint":38,"humidity":0.23,"pressure":1005.4,"windSpeed":10.79,"windGust":18.35,"windBearing":99,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":272.1},{"time":1576353600,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":76.7,"apparentTemperature":76.7,"dewPoint":38.52,"humidity":0.25,"pressure":1005.5,"windSpeed":10.41,"windGust":15.65,"windBearing":92,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":273.4},{"time":1576357200,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":76.49,"apparentTemperature":76.49,"dewPoint":38.86,"humidity":0.26,"pressure":1005.5,"windSpeed":9.96,"windGust":13.23,"windBearing":85,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":274.4},{"time":1576360800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":78.67,"apparentTemperature":78.67,"dewPoint":38.86,"humidity":0.24,"pressure":1005.4,"windSpeed":9.48,"windGust":11.19,"windBearing":75,"cloudCover":0,"uvIndex":0,"visibility":10,"ozone":274.5},{"time":1576364400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":82.39,"apparentTemperature":82.39,"dewPoint":38.86,"humidity":0.21,"pressure":1005.4,"windSpeed":8.89,"windGust":9.47,"windBearing":65,"cloudCover":0,"uvIndex":1,"visibility":10,"ozone":274.3},{"time":1576368000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":86.27,"apparentTemperature":86.27,"dewPoint":39.5,"humidity":0.19,"pressure":1005.4,"windSpeed":8.31,"windGust":8.31,"windBearing":57,"cloudCover":0,"uvIndex":3,"visibility":10,"ozone":274.3},{"time":1576371600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":90.28,"apparentTemperature":90.28,"dewPoint":41.53,"humidity":0.18,"pressure":1004.9,"windSpeed":7.52,"windGust":7.6,"windBearing":44,"cloudCover":0,"uvIndex":6,"visibility":10,"ozone":274.8},{"time":1576375200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":94.47,"apparentTemperature":94.47,"dewPoint":42.89,"humidity":0.17,"pressure":1004.6,"windSpeed":6.98,"windGust":8.72,"windBearing":328,"cloudCover":0,"uvIndex":10,"visibility":10,"ozone":275.5},{"time":1576378800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":97.48,"apparentTemperature":97.48,"dewPoint":44.01,"humidity":0.16,"pressure":1004.2,"windSpeed":7.39,"windGust":10.92,"windBearing":312,"cloudCover":0,"uvIndex":12,"visibility":10,"ozone":276.2},{"time":1576382400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":98.43,"apparentTemperature":98.43,"dewPoint":44.32,"humidity":0.16,"pressure":1003.5,"windSpeed":9.21,"windGust":14.1,"windBearing":50,"cloudCover":0,"uvIndex":13,"visibility":10,"ozone":276.6},{"time":1576386000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":98.13,"apparentTemperature":98.13,"dewPoint":43.94,"humidity":0.16,"pressure":1002.6,"windSpeed":11.8,"windGust":17.95,"windBearing":180,"cloudCover":0,"uvIndex":12,"visibility":10,"ozone":277.1},{"time":1576389600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":97.19,"apparentTemperature":97.19,"dewPoint":44.21,"humidity":0.16,"pressure":1002,"windSpeed":13.83,"windGust":21.1,"windBearing":235,"cloudCover":0,"uvIndex":10,"visibility":10,"ozone":277.6},{"time":1576393200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":95.39,"apparentTemperature":95.39,"dewPoint":46.17,"humidity":0.19,"pressure":1002,"windSpeed":14.76,"windGust":23.13,"windBearing":243,"cloudCover":0,"uvIndex":8,"visibility":10,"ozone":278.7}]},"daily":{"summary":"No precipitation throughout the week.","icon":"clear-day","data":[{"time":1576166400,"summary":"Clear throughout the day.","icon":"clear-day","sunriseTime":1576184760,"sunsetTime":1576235880,"moonPhase":0.55,"precipIntensity":0.0001,"precipIntensityMax":0.0003,"precipIntensityMaxTime":1576239180,"precipProbability":0.01,"precipType":"rain","temperatureHigh":99.41,"temperatureHighTime":1576215840,"temperatureLow":71.68,"temperatureLowTime":1576270260,"apparentTemperatureHigh":98.91,"apparentTemperatureHighTime":1576215840,"apparentTemperatureLow":72.17,"apparentTemperatureLowTime":1576270260,"dewPoint":32.77,"humidity":0.15,"pressure":1014.5,"windSpeed":11.19,"windGust":27.93,"windGustTime":1576180860,"windBearing":117,"cloudCover":0,"uvIndex":13,"uvIndexTime":1576210260,"visibility":10,"ozone":272.9,"temperatureMin":75.49,"temperatureMinTime":1576181100,"temperatureMax":99.41,"temperatureMaxTime":1576215840,"apparentTemperatureMin":75.98,"apparentTemperatureMinTime":1576181100,"apparentTemperatureMax":98.91,"apparentTemperatureMaxTime":1576215840},{"time":1576252800,"summary":"Clear throughout the day.","icon":"clear-day","sunriseTime":1576271160,"sunsetTime":1576322340,"moonPhase":0.58,"precipIntensity":0.0001,"precipIntensityMax":0.0003,"precipIntensityMaxTime":1576314240,"precipProbability":0.01,"precipType":"rain","temperatureHigh":100.2,"temperatureHighTime":1576296180,"temperatureLow":75.84,"temperatureLowTime":1576355940,"apparentTemperatureHigh":99.7,"apparentTemperatureHighTime":1576296180,"apparentTemperatureLow":76.33,"apparentTemperatureLowTime":1576355940,"dewPoint":37.77,"humidity":0.2,"pressure":1009.7,"windSpeed":8.83,"windGust":21.9,"windGustTime":1576317900,"windBearing":173,"cloudCover":0,"uvIndex":13,"uvIndexTime":1576296540,"visibility":10,"ozone":271.9,"temperatureMin":71.68,"temperatureMinTime":1576270260,"temperatureMax":100.2,"temperatureMaxTime":1576296180,"apparentTemperatureMin":72.17,"apparentTemperatureMinTime":1576270260,"apparentTemperatureMax":99.7,"apparentTemperatureMaxTime":1576296180},{"time":1576339200,"summary":"Clear throughout the day.","icon":"clear-day","sunriseTime":1576357560,"sunsetTime":1576408740,"moonPhase":0.62,"precipIntensity":0,"precipIntensityMax":0.0003,"precipIntensityMaxTime":1576425600,"precipProbability":0.02,"temperatureHigh":98.96,"temperatureHighTime":1576383120,"temperatureLow":67.85,"temperatureLowTime":1576442640,"apparentTemperatureHigh":98.46,"apparentTemperatureHighTime":1576383120,"apparentTemperatureLow":68.5,"apparentTemperatureLowTime":1576442580,"dewPoint":45.97,"humidity":0.28,"pressure":1004.3,"windSpeed":10.41,"windGust":25.12,"windGustTime":1576401480,"windBearing":169,"cloudCover":0.02,"uvIndex":13,"uvIndexTime":1576383000,"visibility":10,"ozone":275.8,"temperatureMin":74.81,"temperatureMinTime":1576425600,"temperatureMax":98.96,"temperatureMaxTime":1576383120,"apparentTemperatureMin":75.3,"apparentTemperatureMinTime":1576425600,"apparentTemperatureMax":98.46,"apparentTemperatureMaxTime":1576383120},{"time":1576425600,"summary":"Clear throughout the day.","icon":"clear-day","sunriseTime":1576444020,"sunsetTime":1576495200,"moonPhase":0.65,"precipIntensity":0.0001,"precipIntensityMax":0.0003,"precipIntensityMaxTime":1576425600,"precipProbability":0.04,"precipType":"rain","temperatureHigh":85.22,"temperatureHighTime":1576466340,"temperatureLow":65.33,"temperatureLowTime":1576527600,"apparentTemperatureHigh":85.71,"apparentTemperatureHighTime":1576466280,"apparentTemperatureLow":66.24,"apparentTemperatureLowTime":1576527780,"dewPoint":62.77,"humidity":0.65,"pressure":1007,"windSpeed":9.54,"windGust":25.46,"windGustTime":1576497720,"windBearing":249,"cloudCover":0.18,"uvIndex":9,"uvIndexTime":1576467840,"visibility":10,"ozone":272.7,"temperatureMin":67.85,"temperatureMinTime":1576442640,"temperatureMax":85.22,"temperatureMaxTime":1576466340,"apparentTemperatureMin":68.5,"apparentTemperatureMinTime":1576442580,"apparentTemperatureMax":85.71,"apparentTemperatureMaxTime":1576466280},{"time":1576512000,"summary":"Clear throughout the day.","icon":"clear-day","sunriseTime":1576530420,"sunsetTime":1576581600,"moonPhase":0.69,"precipIntensity":0.0001,"precipIntensityMax":0.0003,"precipIntensityMaxTime":1576594140,"precipProbability":0.04,"precipType":"rain","temperatureHigh":84.36,"temperatureHighTime":1576555380,"temperatureLow":67.55,"temperatureLowTime":1576615080,"apparentTemperatureHigh":83.95,"apparentTemperatureHighTime":1576557300,"apparentTemperatureLow":68.04,"apparentTemperatureLowTime":1576615080,"dewPoint":61.82,"humidity":0.65,"pressure":1012.3,"windSpeed":9.87,"windGust":21.55,"windGustTime":1576579440,"windBearing":207,"cloudCover":0.08,"uvIndex":13,"uvIndexTime":1576555860,"visibility":10,"ozone":272.1,"temperatureMin":65.33,"temperatureMinTime":1576527600,"temperatureMax":84.36,"temperatureMaxTime":1576555380,"apparentTemperatureMin":66.24,"apparentTemperatureMinTime":1576527780,"apparentTemperatureMax":83.95,"apparentTemperatureMaxTime":1576557300},{"time":1576598400,"summary":"Partly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1576616820,"sunsetTime":1576668060,"moonPhase":0.73,"precipIntensity":0,"precipIntensityMax":0.0002,"precipIntensityMaxTime":1576598400,"precipProbability":0.01,"temperatureHigh":91.21,"temperatureHighTime":1576641420,"temperatureLow":65.32,"temperatureLowTime":1576698420,"apparentTemperatureHigh":90.71,"apparentTemperatureHighTime":1576641420,"apparentTemperatureLow":66.78,"apparentTemperatureLowTime":1576698540,"dewPoint":59.65,"humidity":0.56,"pressure":1011.1,"windSpeed":9.33,"windGust":28.96,"windGustTime":1576612560,"windBearing":188,"cloudCover":0.38,"uvIndex":8,"uvIndexTime":1576644060,"visibility":10,"ozone":271.7,"temperatureMin":67.55,"temperatureMinTime":1576615080,"temperatureMax":91.21,"temperatureMaxTime":1576641420,"apparentTemperatureMin":68.04,"apparentTemperatureMinTime":1576615080,"apparentTemperatureMax":90.71,"apparentTemperatureMaxTime":1576641420},{"time":1576684800,"summary":"Partly cloudy throughout the day.","icon":"partly-cloudy-day","sunriseTime":1576703280,"sunsetTime":1576754520,"moonPhase":0.76,"precipIntensity":0.0007,"precipIntensityMax":0.0028,"precipIntensityMaxTime":1576745700,"precipProbability":0.09,"precipType":"rain","temperatureHigh":78.17,"temperatureHighTime":1576732080,"temperatureLow":58.98,"temperatureLowTime":1576787820,"apparentTemperatureHigh":77.93,"apparentTemperatureHighTime":1576731780,"apparentTemperatureLow":59.47,"apparentTemperatureLowTime":1576787820,"dewPoint":62.26,"humidity":0.75,"pressure":1011.6,"windSpeed":12.71,"windGust":19.97,"windGustTime":1576746420,"windBearing":249,"cloudCover":0.26,"uvIndex":9,"uvIndexTime":1576732200,"visibility":9.646,"ozone":276.9,"temperatureMin":63.99,"temperatureMinTime":1576771200,"temperatureMax":78.17,"temperatureMaxTime":1576732080,"apparentTemperatureMin":64.48,"apparentTemperatureMinTime":1576771200,"apparentTemperatureMax":77.93,"apparentTemperatureMaxTime":1576731780},{"time":1576771200,"summary":"Windy overnight.","icon":"wind","sunriseTime":1576789680,"sunsetTime":1576840920,"moonPhase":0.8,"precipIntensity":0.0001,"precipIntensityMax":0.0003,"precipIntensityMaxTime":1576833840,"precipProbability":0.03,"precipType":"rain","temperatureHigh":77.14,"temperatureHighTime":1576821660,"temperatureLow":60.75,"temperatureLowTime":1576873680,"apparentTemperatureHigh":76.64,"apparentTemperatureHighTime":1576821660,"apparentTemperatureLow":61.24,"apparentTemperatureLowTime":1576873680,"dewPoint":51.85,"humidity":0.57,"pressure":1017.2,"windSpeed":14.14,"windGust":40.12,"windGustTime":1576857600,"windBearing":183,"cloudCover":0.02,"uvIndex":13,"uvIndexTime":1576815240,"visibility":10,"ozone":284.1,"temperatureMin":58.98,"temperatureMinTime":1576787820,"temperatureMax":77.14,"temperatureMaxTime":1576821660,"apparentTemperatureMin":59.47,"apparentTemperatureMinTime":1576787820,"apparentTemperatureMax":76.64,"apparentTemperatureMaxTime":1576821660}]},"flags":{"sources":["cmc","gfs","icon","isd","madis"],"nearest-station":2.532,"units":"us"},"offset":8}
`
updateDOM(JSON.parse(_json));
//ApiRequests
celsius = localStorage.celsius;
//document.onload = weatherStart();
//Weather
function weatherStart() {
  navigator.geolocation.getCurrentPosition(successWeather, errorWeather);
}

function successWeather(pos) {
  lat = pos.coords.latitude;
  long = pos.coords.longitude;
  weather(lat, long);
}


function errorWeather() {
  console.log('There was an error');
}

function weather(lat, long) {
  var client = new HttpClient();
  client.get('https://api.darksky.net/forecast/15ed1f5712722aad6d7b85d92ef97eef/' + lat + ',' + long, function(response) {
    updateDOM(JSON.parse(response));
  });
}

document.getElementById("displayWeather").addEventListener("click", function() {
  updateDOM(_json);
});

function updateDOM(json) {
  _json = json;

  if (Math.round(json.latitude) == Math.round(lat) && Math.round(json.longitude) == Math.round(long)) {
    document.getElementById('WLabel').innerHTML = json.timezone;
    if (document.getElementById("displayWeather").checked == true) {
      document.getElementById('WDeg').innerHTML = Math.round((json.currently.temperature - 32) * 5 / 9) + "&deg;";
    } else {
      document.getElementById('WDeg').innerHTML = Math.round(json.currently.temperature) + "&deg;";
    }
    if (json.currently.icon == "clear-day") {
      document.getElementById('WIcon').classList.add('fa-sun', 'far');
    } else if (json.currently.icon == "clear-night") {
      document.getElementById('WIcon').classList.add('fa-moon', 'far');
    } else if (json.currently.icon == "rain") {
      document.getElementById('WIcon').classList.add('fa-cloud-rain', 'fas');
    } else if (json.currently.icon == "partly-cloudy-day" || json.currently.icon == "cloudy") {
      document.getElementById('WIcon').classList.add('fa-cloud', 'fas');
    } else if (json.currently.icon == "partly-cloudy-night") {
      document.getElementById('WIcon').classList.add('fa-cloud-moon', 'fas');
    } else if (json.currently.icon == "snow" || json.currently.icon == "sleet") {
      document.getElementById('WIcon').classList.add('fa-snowflake', 'fas');
    } else if (json.currently.icon == "fog") {
      document.getElementById('WIcon').classList.add('fa-smog', 'fas');
    } else if (json.currently.icon == "wind") {
      document.getElementById('WIcon').classList.add('fa-wind', 'fas');
    } else {
      console.warn("No Weather Icon has been found for this, resorting to default");
      document.getElementById('WIcon').classList.add('fa-cloud fas');
    }
  } else {
    setTimeout(weatherStart, 500);
  }
}

var HttpClient = function() {
  this.get = function(aUrl, aCallback) {
    var anHttpRequest = new XMLHttpRequest();
    anHttpRequest.onreadystatechange = function() {
      if (anHttpRequest.readyState == 4 && anHttpRequest.status == 200)
        aCallback(anHttpRequest.responseText);
    }

    anHttpRequest.open("GET", aUrl, true);
    anHttpRequest.send(null);
  }
}

function quote() {
  var quoteAPI = "https://quotes.rest/qod.json"
  var client = new HttpClient();
  client.get(quoteAPI, function(response) {
    var quote = JSON.parse(response).contents.quotes[0];
    document.getElementById('Quote').innerHTML = "<p id='quoteText'>" + quote.quote + "</p><p id='QuoteAuthor'>" + quote.author + "</p>";
  });
}